package modelo;

import java.util.*;

public class Tablero {
    private static final int NUM_CASILLAS = 50;
    private Casilla[] casillas;

    public Tablero() {
        this.casillas = new Casilla[NUM_CASILLAS];
        generarCasillasAleatorias();
    }

    private void generarCasillasAleatorias() {
        List<Integer> posicionesDisponibles = new ArrayList<>();
        for (int i = 0; i < NUM_CASILLAS; i++) {
            posicionesDisponibles.add(i);
        }
        Collections.shuffle(posicionesDisponibles);

        // Repartir caselles especials
        asignarCasillas(posicionesDisponibles, 5, "OSO");
        asignarCasillas(posicionesDisponibles, 5, "AGUJERO");
        asignarCasillas(posicionesDisponibles, 5, "TRINEO");
        asignarCasillas(posicionesDisponibles, 5, "INTERROGANTE");

        // La resta seran caselles normals
        for (int i = 0; i < NUM_CASILLAS; i++) {
            if (casillas[i] == null) {
                casillas[i] = new Casilla(i, "NORMAL");
            }
        }
    }

    private void asignarCasillas(List<Integer> posiciones, int cantidad, String tipo) {
        for (int i = 0; i < cantidad; i++) {
            int pos = posiciones.remove(0);
            casillas[pos] = new Casilla(pos, tipo);
        }
    }

    public Casilla getCasilla(int posicion) {
        if (posicion < 0) return casillas[0];
        if (posicion >= NUM_CASILLAS) return casillas[NUM_CASILLAS - 1];
        return casillas[posicion];
    }

    public Casilla[] getCasillas() {
        return casillas;
    }

    public int getNumCasillas() {
        return NUM_CASILLAS;
    }
}
