package modelo;

import controlador.gestorPartidas;

/**
 * Representa a un jugador (pingüí).
 */
public abstract class Jugador {
    private String nombre;
    private String color;
    private int posicion;
    private Inventario inventario;

    public Jugador(String nombre, String color) {
        this.nombre     = nombre;
        this.color      = color;
        this.posicion   = 0;
        this.inventario = new Inventario();
    }

    // Getters
    public String     getNombre()         { return nombre; }
    public String     getColor()          { return color; }
    public int        getPosicion()       { return posicion; }
    public Inventario getInventario()    { return inventario; }

    // Clamp posición entre 0 y 49
    public void setPosicion(int p) {
        this.posicion = Math.max(0, Math.min(p, 49));
    }

    /** Retrocede al agujero anterior (“Forat”) */
    public void retrocederAlForatAnterior() {
        int pos = posicion - 1;
        while (pos >= 0) {
            if (gestorPartidas.getTablero()
                .getCasillas().get(pos) instanceof Agujero) {
                setPosicion(pos);
                return;
            }
            pos--;
        }
        setPosicion(0);
    }

    /** Mueve X casillas tras tirar dado */
    public void moverPosicion(int pasos) {
        setPosicion(this.posicion + pasos);
    }
}
